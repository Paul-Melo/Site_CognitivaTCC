# Arquitetura CognitivaTCC

Instale uma extensão de preview Mermaid no VS Code (por exemplo: "Markdown Preview Mermaid Support") para visualizar o diagrama.

## Diagrama
```mermaid
graph TD
%% Services
svcazureappservice_frontendapp["`Name: frontend-app\nPath: cognitiva_tcc\nLanguage: js\nPort: 5173`"]
svcazureappservice_apicalendar["`Name: api-calendar\nPath: calendar-api\nLanguage: python\nPort: 5000`"]
subgraph "Compute Resources"
%% Resources
azureappservice_frontendapp("`frontend-app (Azure App Service)`")
azureappservice_apicalendar("`api-calendar (Azure App Service)`")
end
subgraph "Dependency Resources"
%% Dependency Resources
azuresqldatabase_azuresqldatabase["`azuresqldatabase (Azure SQL Database)`"]
azurekeyvault_azurekeyvault["`azurekeyvault (Azure Key Vault)`"]
end
%% Relationships
svcazureappservice_frontendapp --> |"hosted on"| azureappservice_frontendapp
azureappservice_frontendapp -.-> |"http"| azureappservice_apicalendar
svcazureappservice_apicalendar --> |"hosted on"| azureappservice_apicalendar
azureappservice_apicalendar -.-> |"secret"| azuresqldatabase_azuresqldatabase
azureappservice_apicalendar -.-> |"system-identity"| azurekeyvault_azurekeyvault
```

## Arquitetura
- `frontend-app` (React/Vite) entrega a interface do usuário, consumindo a API via chamadas HTTP.
- `api-calendar` (Flask) expõe endpoints REST para usuários, agendamentos e integração com Google Calendar.
- Comunicação: Navegador → `frontend-app` → HTTP → `api-calendar`.
- Persistência planejada: migração do SQLite local para `Azure SQL Database` (representado no diagrama) para suportar produção.
- Segredos e tokens sensíveis (chaves OAuth, connection strings) devem ser movidos para `Azure Key Vault` usando identidade gerenciada (system-identity).

## Fluxo de Dados
1. Usuário acessa `frontend-app` e inicia agendamento.
2. Frontend envia requisições HTTP (fetch) para `api-calendar` (slots, agendar, contato).
3. API interage com Google Calendar (OAuth + eventos) e banco de dados relacional (futuro Azure SQL).
4. Dados sensíveis (tokens OAuth, credenciais DB) são recuperados de Key Vault, não codificados em variáveis de ambiente permanentes.
5. Respostas retornam ao frontend para feedback em tempo real (slots disponíveis, confirmação de agendamento).

## Tecnologias Suportadas
Hospedagem suportada: appservice, function, containerapp, staticwebapp, aks.
Recursos de ligação suportados: azureaisearch, azureaiservices, azureapplicationinsights, azurebotservice, azurecosmosdb, azurekeyvault, azuredatabaseformysql, azureopenai, azuredatabaseforpostgresql, azureprivateendpoint, azurecacheforredis, azuresqldatabase, azurestorageaccount, azureservicebus, azuresignalrservice, azurevirtualnetwork, azurewebpubsub, azurecontainerregistry.
